{% extends "layoutsite.html" %}

{% block body %}

<h3>Kontrol Paneli</h3>
<small>Hoşgeldin,<strong>{{session["username"]}}</strong> </small>
<hr>

<table>
    
      <tr>
        <th>Toplam</th>
        <th>Giren kişi</th>      
      </tr>
    
     {% for a in al %}
        <tr>
            <td scope="row">{{a[1]}}</td>
            <td scope="row">{{a[0]}}</td>          
          </tr>
        {% endfor %}
         
   
  </table>
  <style>
      table, th, td {
        border: 1px solid black;
    }
    th {
        cursor: pointer;
    }
  </style>
  <script>
      const getCellValue = (tr, idx) => tr.children[idx].innerText || tr.children[idx].textContent;

      const comparer = (idx, asc) => (a, b) => ((v1, v2) => 
          v1 !== '' && v2 !== '' && !isNaN(v1) && !isNaN(v2) ? v1 - v2 : v1.toString().localeCompare(v2)
          )(getCellValue(asc ? a : b, idx), getCellValue(asc ? b : a, idx));
      
      // do the work...
      document.querySelectorAll('th').forEach(th => th.addEventListener('click', (() => {
          const table = th.closest('table');
          Array.from(table.querySelectorAll('tr:nth-child(n+2)'))
              .sort(comparer(Array.from(th.parentNode.children).indexOf(th), this.asc = !this.asc))
              .forEach(tr => table.appendChild(tr) );
      })));
  </script>
{% endblock body %}